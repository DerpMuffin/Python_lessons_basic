CREATE TABLE "Classes" ( `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, `name` TEXT NOT NULL UNIQUE );
CREATE TABLE `Lessons` ( `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, `name` TEXT NOT NULL UNIQUE );
CREATE TABLE "Parents" ( `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, `last_name` TEXT NOT NULL, `first_name` TEXT NOT NULL, `second_name` TEXT );
CREATE TABLE "Students" ( `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, `last_name` TEXT NOT NULL, `first_name` TEXT NOT NULL, `second_name` TEXT, `class_id` INTEGER NOT NULL, FOREIGN KEY(`class_id`) REFERENCES `Classes`(`id`) ON DELETE CASCADE );
CREATE TABLE "Teachers" ( `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, `last_name` TEXT NOT NULL, `first_name` TEXT NOT NULL, `second_name` TEXT, `lesson_id` INTEGER NOT NULL, FOREIGN KEY(`lesson_id`) REFERENCES `Lessons`(`id`) ON DELETE CASCADE );
CREATE TABLE "Students_Parents" ( `student_id` INTEGER NOT NULL UNIQUE, `mother_id` INTEGER NOT NULL, `father_id` INTEGER NOT NULL, FOREIGN KEY(`father_id`) REFERENCES `Parents`(`id`) ON DELETE CASCADE, FOREIGN KEY(`mother_id`) REFERENCES `Parents`(`id`) ON DELETE CASCADE, FOREIGN KEY(`student_id`) REFERENCES `Students`(`id`) ON DELETE CASCADE, PRIMARY KEY(`student_id`,`mother_id`,`father_id`) );
CREATE TABLE "Classes_Lessons_Teachers" ( `class_id` INTEGER NOT NULL, `teacher_id` INTEGER NOT NULL, `lesson_id` INTEGER NOT NULL, PRIMARY KEY(`class_id`,`lesson_id`), FOREIGN KEY(`teacher_id`) REFERENCES `Teachers`(`id`) ON DELETE CASCADE, FOREIGN KEY(`class_id`) REFERENCES `Classes`(`id`) ON DELETE CASCADE, FOREIGN KEY(`lesson_id`) REFERENCES `Lessons`(`id`) ON DELETE CASCADE );